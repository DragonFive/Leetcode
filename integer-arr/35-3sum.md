---
title: 35-3sum
tags: 新建,模板,小书匠
grammar_cjkRuby: true
---

# source

[leetcode 35 3 sum](https://leetcode.com/problems/3sum/)

# solution 

## 排序 + hash 
```cpp
vector<vector<int> > threeSum(vector<int>& nums) {
	typedef map<int, int> inthash;
	typedef multimap<int, int> intmulhash;
	inthash val_ind;
	intmulhash selectedVal;
	vector<vector<int> > result;
	const int nums_size = nums.size();
	vector<int> copyNums(nums);
	sort(copyNums.begin(), copyNums.end());
	//先做哈希表;
	for (int i = 0; i < nums_size; i++)
	{
		if (val_ind.find(copyNums[i]) == val_ind.end())
		{
			val_ind.insert(make_pair(copyNums[i], i));
		}
	}
	//再挨个遍历
	for (int i = 1; i < nums_size; ++i)
	{
		for (int j = i + 1; j <nums_size; ++j)
		{
			int fsum = -copyNums[i] - copyNums[j];
			inthash::iterator itmm = val_ind.find(fsum);
			intmulhash::iterator itmp = selectedVal.find(copyNums[i]);
			if (itmm != val_ind.end() && itmm->second < i )//&& !(itmp != selectedVal.end() && itmp->second == itmm->first))
			{
				bool calcued = false;
				for (; itmp != selectedVal.upper_bound(copyNums[i]); itmp++)
				{
					if (itmp->second == itmm->first)
					{
						calcued = true;
						break;
					}	
				}
				if (calcued)
					continue;
				vector<int> temp;
				temp.push_back(itmm->first);
				temp.push_back(copyNums[i]);
				temp.push_back(copyNums[j]);
				result.push_back(temp);
				selectedVal.insert(make_pair(copyNums[i], itmm->first));
			}
		}
	}
	return result;
}
```

leetcode上TLE

## 改进版




